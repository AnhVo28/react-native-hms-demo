{"resources":{"version":"1","variables":[{"exec":"__ai","name":"App ID"},{"exec":"__an","name":"App Name"},{"exec":"__en","name":"Event Name"}],"conditions":[["_cn",["var",2],"DTM"],["_cn",["var",2],"M"]],"tags":[{"exec":"__ha","name":"HATest","conditions":["list",["list",0,1],["list",1,0]],"params":{"action":"modify"}}]},"functions":[["define","__an",[],{"__return":[{"appName":[]}]}],["define","__en",[],{"__return":[{"event":[]}]}],["define","__ai",[],{"__return":[{"appId":[]}]}],["define","__ha",["paramsMap"],{"__init":["action","deleteParamsList","eventName"]},{"__set":["action",{"__getmap":[{"__get":["paramsMap"]},"action"]}]},{"__if":[{"_eq":[{"__get":["action"]},"add"]},{"__funclist":[{"__if":[{"__getmap":[{"__get":["paramsMap"]},"mergeParameters"]},{"__funclist":[{"__set":["deleteParamsList",{"__judge":[{"__getmap":[{"__get":["paramsMap"]},"deleteParameters"]},{"__funclist":[{"__list":[]}]}]}]}]},{"__funclist":[{"__set":["deleteParamsList",{"__list":[]}]}]}]},{"__ha_sendEvent":[{"__getmap":[{"__get":["paramsMap"]},"newEventName"]},{"__getmap":[{"__get":["paramsMap"]},"modifyParameters"]},{"__get":["deleteParamsList"]},{"__getmap":[{"__get":["paramsMap"]},"mergeParameters"]}]}]}]},{"__if":[{"_eq":[{"__get":["action"]},"modify"]},{"__funclist":[{"__set":["eventName",{"__judge":[{"__getmap":[{"__get":["paramsMap"]},"newEventName"]},{"__funclist":[{"event":[]}]}]}]},{"__ha_sendEvent":[{"__get":["eventName"]},{"__getmap":[{"__get":["paramsMap"]},"modifyParameters"]},{"__judge":[{"__getmap":[{"__get":["paramsMap"]},"deleteParameters"]},{"__funclist":[{"__list":[]}]}]},true]},{"__block2ha":[]}]}]},{"__if":[{"_eq":[{"__get":["action"]},"block"]},{"__funclist":[{"__block2ha":[]}]}]}],["define","__ha_sendEvent",["eventName","modifyParameters","deleteParamsList","merge"],{"__init":["modifyParamsMap","deleteKeysList","bundleMap","mergedParamsMap"]},{"__set":["modifyParamsMap",{"__judge":[{"__get":["modifyParameters"]},{"__funclist":[{"__map":[]}]}]}]},{"__set":["deleteKeysList",{"__judge":[{"__get":["deleteParamsList"]},{"__funclist":[{"__list":[]}]}]}]},{"__if":[{"__get":["merge"]},{"__funclist":[{"__set":["bundleMap",{"__judge":[{"__getbundle":[]},{"__funclist":[{"__map":[]}]}]}]}]},{"__funclist":[{"__set":["bundleMap",{"__map":[]}]}]}]},{"__set":["mergedParamsMap",{"__map":[]}]},{"__if":[{"_eq":[{"__len":[{"__get":["eventName"]}]},0]},{"__funclist":[{"__log":["w","eventName can not be empty."]},{"__return":[]}]}]},{"__foreach":["key",{"__get":["bundleMap"]},{"__funclist":[{"__if":[{"_not":[{"__contains":[{"__get":["deleteKeysList"]},{"__get":["key"]}]}]},{"__funclist":[{"__putmap":[{"__get":["mergedParamsMap"]},{"__get":["key"]},{"__getmap":[{"__get":["bundleMap"]},{"__get":["key"]}]}]}]}]}]}]},{"__foreach":["key",{"__get":["modifyParamsMap"]},{"__funclist":[{"__if":[{"_not":[{"__contains":[{"__get":["deleteKeysList"]},{"__get":["key"]}]}]},{"__funclist":[{"__putmap":[{"__get":["mergedParamsMap"]},{"__get":["key"]},{"__getmap":[{"__get":["modifyParamsMap"]},{"__get":["key"]}]}]}]}]}]}]},{"__send2ha":[{"__get":["eventName"]},{"__get":["mergedParamsMap"]}]}]],"download_url":"https://dtm-dre.platform.hicloud.com","ser_country":"DE"}